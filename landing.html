<!DOCTYPE html>
<html>
<head>
	<title>Hitch</title>
</head>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
<script lang="js">
	let xs;
	let	ys;
        async function doTraining(model){
            const history = await model.fit(xs, ys, {epochs: 500, callbacks: {onEpochEnd: async(epoch, logs) => {
                console.log("Epochs:" + epoch + "Loss:" + logs.loss);
            }
            }});
        }

        const model = tf.sequential();
        model.add(tf.layers.dense({units: 1, inputShape: [1]}));
        model.compile({loss:'meanSquaredError',
                      optimizer:'sgd'});
        model.summary();
    </script>

<body>
	<table border="1">
		<tr>
			<td><input type="text" name="" class="x" placeholder="Enter x1"></td>
			<td><input type="text" name="" class="y" placeholder="Enter y1"></td>
		</tr>
		<tr>
			<td><input type="text" name="" class="x" placeholder="Enter x2"></td>
			<td><input type="text" name="" class="y" placeholder="Enter y2"></td>
		</tr>
		<tr>
			<td><input type="text" name="" class="x" placeholder="Enter x3"></td>
			<td><input type="text" name="" class="y" placeholder="Enter y3"></td>
		</tr>
		<tr>
			<td><input type="text" name="" class="x" placeholder="Enter x4"></td>
			<td><input type="text" name="" class="y" placeholder="Enter y4"></td>
		</tr>
		<tr>
			<td><input type="text" name="" class="x" placeholder="Enter x5"></td>
			<td><input type="text" name="" class="y" placeholder="Enter y5"></td>
		</tr>
		<tr>
			<td><input type="text" name="" class="x" placeholder="Enter x6"></td>
			<td><input type="text" name="" class="y" placeholder="Enter y6"></td>
		</tr>
	</table>
	<p></p>
	<button id="train">Train</button>
	<p>Enter x who's y you want to predict</p>
	<input type="text" name="" placeholder="Enter x" id="test_value">
	<p></p>
	<button id="predict">Predict</button>
</body>
</html>
<script type="text/javascript">
		var train = document.getElementById("train");
		var predict = document.getElementById("predict");
		var test_value = document.getElementById("test_value");

		train.addEventListener("click", async function() {
			var x = await document.getElementsByClassName("x"); 
			var y = await document.getElementsByClassName("y");
			// create training function here
xs = await tf.tensor2d([parseFloat(x[0].value), parseFloat(x[1].value), parseFloat(x[2].value), parseFloat(x[3].value), parseFloat(x[4].value), parseFloat(x[5].value)],[6, 1]);
ys = await tf.tensor2d([parseFloat(y[0].value), parseFloat(y[1].value), parseFloat(y[2].value), parseFloat(y[3].value), parseFloat(y[4].value), parseFloat(y[5].value)],[6, 1]);
doTraining(model);
        			});
		predict.addEventListener("click", async function(){
			test_value = test_value.value; //to store the value of x who's y we want to predict 
			console.log(test_value);
			alert(model.predict(tf.tensor2d([parseFloat(test_value)], [1, 1])));


			// create prediction function here
		});
	</script>